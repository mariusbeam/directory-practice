import { h, addClassToHast, notionPrefixFactory } from '../utils.js';
import handleRichText from './rich-text.js';
const handler = (context, captionObjs) => {
    const captionClass = notionPrefixFactory(context)('caption');
    const hast = h('div', { className: [captionClass] }, []);
    context.addTasks(captionObjs, (richTextObj) => (ctx) => {
        hast.children.push(handleRichText(ctx, null, richTextObj));
    });
    return hast;
};
export const addCaptionToHast = (context, hast, captionObjs) => {
    if (!captionObjs || captionObjs.length < 1) {
        return;
    }
    const caption = handler(context, captionObjs);
    hast.children.push(caption);
    const CLS_WITH_CAPTION = 'with-caption';
    addClassToHast(hast, CLS_WITH_CAPTION);
};
export default handler;
